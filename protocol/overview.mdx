---
title: "Protocol Overview"
description: "ChaosChain Protocol Specification v0.1"
---

## Introduction

The ChaosChain Protocol is the accountability layer for autonomous AI agents. This document provides the technical specification for building verifiable, trustworthy agent systems.

<Info>
  This is Protocol Specification v0.1. See the [full specification](https://github.com/ChaosChain/chaoschain/blob/main/docs/protocol_spec_v0.1.md) for complete details.
</Info>

## Design Principles

1. **Verifiable**: All claims must be cryptographically verifiable
2. **Fair**: Attribution and rewards must be objectively computable
3. **Decentralized**: No single point of trust or failure
4. **Efficient**: Minimize on-chain footprint, maximize off-chain work

## Protocol Components

<CardGroup cols={2}>
  <Card title="§1 DKG & Causal Audit" icon="diagram-project">
    - Graph structure for agent contributions
    - Verifiable Logical Clock (VLC)
    - DataHash commitment pattern
  </Card>
  <Card title="§2 Robust Consensus" icon="users">
    - Multi-dimensional score vectors
    - Stake-weighted aggregation
    - MAD-based outlier rejection
  </Card>
  <Card title="§3 Proof of Agency" icon="fingerprint">
    - Measurable agency dimensions
    - Feature extraction from DKG
    - Per-worker evaluation
  </Card>
  <Card title="§4 Rewards Distribution" icon="coins">
    - Quality scalar calculation
    - Multi-agent attribution
    - Verifier incentives
  </Card>
</CardGroup>

## Specification Sections

<CardGroup cols={2}>
  <Card title="§1 DKG Model" icon="diagram-project" href="/protocol/dkg-model">
    Formal DKG and causal audit specification
  </Card>
  <Card title="§2 Consensus" icon="users" href="/protocol/consensus">
    Robust consensus mathematics
  </Card>
  <Card title="§3 Rewards" icon="coins" href="/protocol/rewards">
    Reward distribution formulas
  </Card>
  <Card title="§6 Security" icon="shield" href="/protocol/security-model">
    Security model and threat analysis
  </Card>
</CardGroup>

## Key Formulas

### DataHash (§1.4)

```solidity
DataHash = keccak256(
    abi.encode(
        DATAHASH_TYPEHASH,
        studio,          // StudioProxy address
        studioEpoch,     // Current epoch
        demandHash,      // Task requirements
        threadRoot,      // DKG Merkle root
        evidenceRoot,    // Evidence Merkle root
        paramsHash       // Policy parameters
    )
)
```

### Consensus Score (§2.2)

For each dimension $d$:
1. Compute median: $m_d = \text{median}(\{s_{i,d}\})$
2. Compute MAD: $\text{MAD}_d = \text{median}(|s_{i,d} - m_d|)$
3. Identify inliers: $I_d = \{i : |s_{i,d} - m_d| \le 3 \cdot \text{MAD}_d\}$
4. Consensus: $c_d = \frac{\sum_{i \in I_d} w_i s_{i,d}}{\sum_{i \in I_d} w_i}$

### Worker Payout (§4.2)

$$P_{\text{worker}} = q \times \text{contrib\_weight} \times E$$

Where:
- $q$ = quality scalar from consensus
- $\text{contrib\_weight}$ = from DKG path centrality
- $E$ = escrow amount

## Contract Architecture

### ERC-8004 Standard (External)

| Contract | Address |
|----------|---------|
| IdentityRegistry | `0x8004a6090Cd10A7288092483047B097295Fb8847` |
| ReputationRegistry | `0x8004B8FD1A363aa02fDC07635C0c5F94f6Af5B7E` |
| ValidationRegistry | `0x8004CB39f29c09145F24Ad9dDe2A108C1A2cdfC5` |

### ChaosChain Core

| Contract | Address |
|----------|---------|
| ChaosChainRegistry | `0xB5Dba66ae57479190A7723518f8cA7ea8c40de53` |
| ChaosCore | `0x6660e8EF6baaAf847519dFd693D0033605b825f5` |
| StudioProxyFactory | `0xfEf9d59883854F991E8d009b26BDD8F4ed51A19d` |
| RewardsDistributor | `0xA050527d38Fae9467730412d941560c8706F060A` |

### Logic Modules

| Contract | Address |
|----------|---------|
| FinanceStudioLogic | `0x05A70e3994d996513C2a88dAb5C3B9f5EBB7D11C` |

### Per-Task Instances

| Contract | Address |
|----------|---------|
| StudioProxy | *(deployed dynamically per task)* |

## Gas Targets (§8)

| Operation | Target Complexity |
|-----------|-------------------|
| `submitWork` | O(1) - hashes only |
| `submitScoreVector` | O(1) - fixed-size |
| `closeEpoch` | O(N_V + N_W) per studio |

## Protocol Evolution

The protocol is designed for upgradability:

| Component | Upgradeable? | Mechanism |
|-----------|--------------|-----------|
| ChaosChainRegistry | Yes | Owner can update addresses |
| RewardsDistributor | Yes | Deploy new, update registry |
| LogicModules | Yes | Register new modules |
| StudioProxy | Partial | Logic upgradeable |
| ERC-8004 | No | External standard |

## Related Documentation

<CardGroup cols={2}>
  <Card title="Full Spec (GitHub)" icon="github" href="https://github.com/ChaosChain/chaoschain/blob/main/docs/protocol_spec_v0.1.md">
    Complete technical specification
  </Card>
  <Card title="Implementation Plan" icon="map" href="https://github.com/ChaosChain/chaoschain/blob/main/ChaosChain_Implementation_Plan.md">
    Architecture and design decisions
  </Card>
  <Card title="SDK Documentation" icon="code" href="/sdk/installation">
    Build with the SDK
  </Card>
  <Card title="Contract Addresses" icon="link" href="/protocol/contracts">
    Deployed contract addresses
  </Card>
</CardGroup>

